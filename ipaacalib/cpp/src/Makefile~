ifeq ($(WBS_ARCH),mac)
	LIB_SUFFIX=.dylib
else
	LIB_SUFFIX=.so
endif

CONFIG = -DIPAACA_DEBUG_MESSAGES
#IPAACASOURCES = ipaaca.cc ../build/ipaaca/ipaaca.pb.cc
IPAACASOURCES = ../build/ipaaca/ipaaca.pb.cc
SOURCES = ${IPAACASOURCES} ipaaca-test-main.cc
TEXTSOURCES = ${IPAACASOURCES} textsender.cc
CCFLAGS=-I../include -I../build -I/usr/local/include -I/opt/local/include ${CONFIG}
LIBFLAGS=-fPIC -shared
BOOSTLIBS = -L/opt/local/lib -lboost_regex-mt -lboost_date_time-mt -lboost_program_options-mt -lboost_thread-mt -lboost_filesystem-mt -lboost_signals-mt -lboost_system-mt
PROTOLIBS = -L/opt/local/lib -lprotobuf
LIBS = ${BOOSTLIBS} ${PROTOLIBS} -L/usr/local/lib -L../build -lrsc -lrsbcore -lipaaca

COMPILER = gcc#gfilt

all: lib
	

#lib:
#	${COMPILER} ${CCFLAGS} ${IPAACASOURCES} ${LIBS} ${LIBFLAGS} -o libipaaca${LIB_SUFFIX}

receiver:
	${COMPILER} ${CCFLAGS} -DMAKE_RECEIVER -o ipaaca-receiver ${SOURCES} ${LIBS}

sender:
	${COMPILER} ${CCFLAGS} -DMAKE_SENDER -o ipaaca-sender ${SOURCES} ${LIBS}

#main:
#	${COMPILER} ${CCFLAGS} -o ipaaca-main ${SOURCES} ${LIBS}

#protoc:
#	protoc --proto_path=../../proto ../../proto/ipaaca.proto --cpp_out=.

#clean:
#	rm -f libipaaca${LIB_SUFFIX} ipaaca-main ipaaca-sender ipaaca-receiver ipaaca.pb.h ipaaca.pb.cc


